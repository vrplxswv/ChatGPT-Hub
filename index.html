<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>vrplxswv Hub Daily Key</title>
    <style>
        body {
            background: #0e0e0e;
            color: white;
            text-align: center;
            font-family: Arial, sans-serif;
            margin-top: 100px;
        }
        #key {
            font-size: 32px;
            color: #00aaff;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>vrplxswv Hub Daily Key</h1>
    <div id="key">Loading...</div>

    <script>
        function sha1(msg) {
            function rotate_left(n, s) {
                return (n << s) | (n >>> (32 - s));
            }

            function cvt_hex(val) {
                var str = "";
                for (var i = 7; i >= 0; i--) {
                    var v = (val >>> (i * 4)) & 0x0f;
                    str += v.toString(16);
                }
                return str;
            }

            function Utf8Encode(string) {
                string = string.replace(/\r\n/g, "\n");
                var utftext = "";

                for (var n = 0; n < string.length; n++) {
                    var c = string.charCodeAt(n);

                    if (c < 128) utftext += String.fromCharCode(c);
                    else if (c < 2048) {
                        utftext += String.fromCharCode((c >> 6) | 192);
                        utftext += String.fromCharCode((c & 63) | 128);
                    } else {
                        utftext += String.fromCharCode((c >> 12) | 224);
                        utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                        utftext += String.fromCharCode((c & 63) | 128);
                    }
                }
                return utftext;
            }

            msg = Utf8Encode(msg);

            var word_array = [];
            var msg_len = msg.length;

            for (var i = 0; i < msg_len - 3; i += 4) {
                var j = (msg.charCodeAt(i) << 24) |
                        (msg.charCodeAt(i + 1) << 16) |
                        (msg.charCodeAt(i + 2) << 8) |
                        msg.charCodeAt(i + 3);
                word_array.push(j);
            }

            var remainder = msg_len % 4;
            if (remainder === 0) {
                word_array.push(0x080000000);
            } else if (remainder === 1) {
                word_array.push((msg.charCodeAt(msg_len - 1) << 24) | 0x0800000);
            } else if (remainder === 2) {
                word_array.push((msg.charCodeAt(msg_len - 2) << 24) |
                                (msg.charCodeAt(msg_len - 1) << 16) |
                                0x08000);
            } else if (remainder === 3) {
                word_array.push((msg.charCodeAt(msg_len - 3) << 24) |
                                (msg.charCodeAt(msg_len - 2) << 16) |
                                (msg.charCodeAt(msg_len - 1) << 8) |
                                0x80);
            }

            while ((word_array.length % 16) !== 14) {
                word_array.push(0);
            }

            word_array.push(msg_len >>> 29);
            word_array.push((msg_len << 3) & 0x0ffffffff);

            var H0 = 0x67452301;
            var H1 = 0xEFCDAB89;
            var H2 = 0x98BADCFE;
            var H3 = 0x10325476;
            var H4 = 0xC3D2E1F0;

            for (var blockstart = 0; blockstart < word_array.length; blockstart += 16) {
                var W = word_array.slice(blockstart, blockstart + 16);

                for (var i = 16; i < 80; i++) {
                    W[i] = rotate_left(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);
                }

                var A = H0, B = H1, C = H2, D = H3, E = H4;

                for (var i = 0; i < 80; i++) {
                    var temp;
                    if (i < 20)
                        temp = ((B & C) | (~B & D)) + 0x5A827999;
                    else if (i < 40)
                        temp = (B ^ C ^ D) + 0x6ED9EBA1;
                    else if (i < 60)
                        temp = ((B & C) | (B & D) | (C & D)) + 0x8F1BBCDC;
                    else
                        temp = (B ^ C ^ D) + 0xCA62C1D6;

                    temp = (rotate_left(A, 5) + temp + E + W[i]) & 0x0ffffffff;
                    E = D; D = C; C = rotate_left(B, 30); B = A; A = temp;
                }

                H0 = (H0 + A) & 0x0ffffffff;
                H1 = (H1 + B) & 0x0ffffffff;
                H2 = (H2 + C) & 0x0ffffffff;
                H3 = (H3 + D) & 0x0ffffffff;
                H4 = (H4 + E) & 0x0ffffffff;
            }

            return (cvt_hex(H0) + cvt_hex(H1) + cvt_hex(H2) + cvt_hex(H3) + cvt_hex(H4));
        }

        // Generate today's key
        const d = new Date();
        const raw = "vrplxswv" + d.getUTCFullYear() + (d.getUTCMonth()+1) + d.getUTCDate();
        const digest = sha1(raw).substr(0, 12);

        document.getElementById("key").textContent = digest;
    </script>
</body>
</html>
